* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
body { display: flex; flex-direction: column; min-height: 100vh; }
.topbar { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 1rem; border-bottom: 1px solid #e5e7eb; background: #fafafa; }
.topbar h1 { font-size: 1.1rem; margin: 0; font-weight: 600; }
.toolbar button { margin-right: 0.5rem; }
.toolbar button.active { font-weight: 700; }
.app-messages { display: flex; align-items: flex-start; justify-content: space-between; gap: 1rem; padding: 0.5rem 1rem; border-bottom: 1px solid #e5e7eb; background: #f1f5f9; color: #0f172a; }
.app-messages__content { display: grid; gap: 0.5rem; flex: 1; }
.app-messages__text { flex: 1; font-weight: 600; }
.app-messages__details { display: grid; gap: 0.5rem; }
.app-messages__dismiss { border: none; background: transparent; font-size: 1.25rem; line-height: 1; cursor: pointer; color: inherit; padding: 0.25rem; }
.layout { flex: 1; display: grid; grid-template-columns: 1fr 1fr; gap: 0; min-height: 0; }
.pane { border-right: 1px solid #eee; padding: 0.75rem; overflow: auto; }
.pane:last-child { border-right: none; }
.placeholder { border: 2px dashed #d1d5db; border-radius: 10px; padding: 1.25rem; text-align: center; color: #6b7280; }
.stage { display: flex; align-items: center; justify-content: center; min-height: 300px; background: #111; color: #eee; border-radius: 12px; overflow: hidden; }
.stage img { width: 100%; height: 100%; object-fit: cover; }
.stage-empty { padding: 2rem; color: #9ca3af; }
.graph-container { min-height: 100%; overflow: auto; padding: 1rem; }
.graph-empty { color: #6b7280; text-align: center; margin-top: 2rem; }
.graph-host { display: flex; justify-content: center; align-items: flex-start; }
.graph-host svg { max-width: none; height: auto; }
.graph-node { fill: #f3f4f6; stroke: #d1d5db; stroke-width: 2; cursor: pointer; transition: fill 0.2s ease; }
.graph-node.is-selected { fill: #dbeafe; stroke: #3b82f6; }
.graph-nodes g:focus-visible .graph-node { stroke: #1d4ed8; stroke-width: 3; }
.graph-node-title { font-weight: 600; fill: #111827; }
.graph-node-subtitle { font-size: 0.75rem; fill: #6b7280; }
.graph-node-thumb { clip-path: inset(0 round 12px); }
.graph-connectors { fill: none; stroke: #9ca3af; stroke-width: 2; }
.graph-arrowhead { fill: #9ca3af; }
.graph-connectors path { transition: stroke 0.2s ease; }
.inspector { display: grid; gap: 1rem; }
.inspector-header { display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
.inspector-header h3 { margin: 0; }
.inspector-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.field { display: grid; gap: 0.25rem; }
.field > span { font-size: 0.85rem; color: #4b5563; }
.image-preview { min-height: 120px; background: #f9fafb; border: 1px dashed #d1d5db; border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
.image-preview img { max-width: 100%; max-height: 160px; object-fit: cover; }
.dialogue-editor, .choice-editor { display: grid; gap: 0.75rem; }
.dialogue-line, .choice-row { display: grid; gap: 0.5rem; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; background: #fff; }
.dialogue-line textarea { width: 100%; }
.audio-info { font-size: 0.85rem; color: #374151; display: flex; align-items: center; gap: 0.5rem; }
.player-panel { display: grid; gap: 1rem; }
.player-history { display: grid; gap: 0.5rem; padding: 0.75rem 1rem; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 10px; }
.player-history-title { margin: 0; font-size: 0.95rem; color: #1f2937; }
.player-history-nav { display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; }
.player-history-nav button { padding: 0.4rem 0.75rem; font-size: 0.95rem; }
.player-history-nav button:disabled { opacity: 0.5; cursor: not-allowed; }
.player-history-list { list-style: none; display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0; padding: 0; }
.player-history-list li { margin: 0; }
.player-history-entry { padding: 0.35rem 0.75rem; border: 1px solid #d1d5db; border-radius: 999px; background: #fff; color: #111827; cursor: pointer; transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease; }
.player-history-entry:disabled { cursor: default; opacity: 0.85; }
.player-history-entry[aria-current] { background: #1d4ed8; border-color: #1d4ed8; color: #fff; cursor: default; }
.player-dialogue { display: grid; gap: 0.75rem; padding: 1rem; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; }
.player-dialogue-line { display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
.audio-play { padding: 0.25rem 0.5rem; }
.player-choices { display: grid; gap: 0.5rem; }
.player-choices button { padding: 0.6rem 0.75rem; font-size: 1rem; }
.player-choices .the-end { font-size: 1.5rem; text-align: center; font-weight: 600; }
.validation-results { display: grid; gap: 0.5rem; }
.validation-errors { background: #fee2e2; border: 1px solid #fecaca; color: #991b1b; padding: 0.5rem 0.75rem; border-radius: 8px; }
.validation-warnings { background: #fef3c7; border: 1px solid #fde68a; color: #92400e; padding: 0.5rem 0.75rem; border-radius: 8px; }
.validation-ok { color: #166534; font-weight: 600; }
button:focus-visible, select:focus-visible, textarea:focus-visible, input:focus-visible { outline: 3px solid #2563eb; outline-offset: 2px; }
@media (max-width: 900px) {
  .layout { grid-template-columns: 1fr; }
  .pane { border-right: none; border-bottom: 1px solid #eee; }
  .pane:last-child { border-bottom: none; }
}
